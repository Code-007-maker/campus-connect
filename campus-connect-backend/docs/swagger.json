{
  "openapi": "3.0.0",
  "info": {
    "title": "Campus Connect API",
    "version": "1.0.0",
    "description": "API documentation for the Campus Connect Platform (Student, Faculty & Admin System)."
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Local Development Server"
    }
  ],
  "tags": [
    { "name": "Auth", "description": "Authentication and login endpoints." },
    { "name": "Users", "description": "User management and profiles." },
    { "name": "Announcements", "description": "Notice board + real-time updates." },
    { "name": "Calendar", "description": "Class schedule + Google Calendar sync." },
    { "name": "Resources", "description": "Rooms, labs, equipment management." },
    { "name": "Booking", "description": "Resource booking system." },
    { "name": "Forum", "description": "Discussion posts and replies." },
    { "name": "Notifications", "description": "Push and in-app notifications." }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": { "type": "string", "example": "abc@student.com" },
          "password": { "type": "string", "example": "Password@123" }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "name": { "type": "string" },
          "email": { "type": "string" },
          "role": { "type": "string", "enum": ["student", "faculty", "admin"] }
        }
      },
      "Announcement": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "message": { "type": "string" },
          "createdBy": { "type": "string" },
          "expiresAt": { "type": "string", "format": "date-time" }
        }
      },
      "CalendarEvent": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "start": { "type": "string", "format": "date-time" },
          "end": { "type": "string", "format": "date-time" },
          "googleEventId": { "type": "string" }
        }
      }
    }
  },

  "paths": {
    "/api/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login and receive JWT",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": { "type": "string" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          }
        }
      }
    },

    "/api/users/me": {
      "get": {
        "tags": ["Users"],
        "summary": "Get logged-in user profile",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": { "description": "Returns logged-in user details" }
        }
      }
    },

    "/api/announcements": {
      "get": {
        "tags": ["Announcements"],
        "summary": "Fetch all announcements",
        "security": [{ "BearerAuth": [] }],
        "responses": { "200": { "description": "List of announcements" } }
      },
      "post": {
        "tags": ["Announcements"],
        "summary": "Create announcement",
        "security": [{ "BearerAuth": [] }],
        "responses": { "201": { "description": "Created announcement" } }
      }
    },

    "/api/calendar/events": {
      "post": {
        "tags": ["Calendar"],
        "summary": "Create event & sync to Google Calendar",
        "security": [{ "BearerAuth": [] }],
        "responses": { "201": { "description": "Event created" } }
      }
    },

    "/api/resources": {
      "get": {
        "tags": ["Resources"],
        "summary": "Get available resources",
        "security": [{ "BearerAuth": [] }],
        "responses": { "200": { "description": "List of resources" } }
      }
    },

    "/api/bookings": {
      "post": {
        "tags": ["Booking"],
        "summary": "Book a resource",
        "security": [{ "BearerAuth": [] }],
        "responses": { "201": { "description": "Booking created" } }
      }
    },

    "/api/forum": {
      "get": {
        "tags": ["Forum"],
        "summary": "Fetch forum posts",
        "security": [{ "BearerAuth": [] }],
        "responses": { "200": { "description": "List of posts" } }
      }
    },

    "/api/notifications": {
      "get": {
        "tags": ["Notifications"],
        "summary": "Fetch user notifications",
        "security": [{ "BearerAuth": [] }],
        "responses": { "200": { "description": "Returns notifications" } }
      }
    }
  }
}
